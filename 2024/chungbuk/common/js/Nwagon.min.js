/*Copyright (c) 2013 NTS Corp. All Rights Reserved.

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/
/*Developed by Insook Choe (choe.insook@nhn.com), Inho Jung(inho.jung@nhn.com)*/
var CONST_SVG_URL="http://www.w3.org/2000/svg",VML_NAME_SPACE="urn:schemas-microsoft-com:vml",CONST_MAX_RADIUS=100,CONST_DECREMENT=20,Nwagon={chart:function(e){var t=!1;/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(new Number(RegExp.$1)<=8&&(t=!0,document.namespaces.v||document.namespaces.add("v",VML_NAME_SPACE)));var a=new Object;switch(a.chartType=e.chartType,a.dataset=e.dataset,a.legend=e.legend,a.width=e.chartSize.width,a.height=e.chartSize.height,a.chart_div=e.chartDiv,a.chartType){case"radar":t?Nwagon_ie.radar.drawRadarChart(a):this.radar.drawRadarChart(a);break;case"polar":case"polar_pie":a.core_circle_radius=e.core_circle_radius,a.core_circle_value=e.core_circle_value,a.max=e.maxValue,a.increment=e.increment,t?Nwagon_ie.polar.drawPolarChart(a):this.polar.drawPolarChart(a);break;case"donut":case"pie":a.core_circle_radius=0,"donut"==a.chartType&&(a.core_circle_radius=e.core_circle_radius),a.donut_width=e.donut_width,t?Nwagon_ie.donut.drawDonutChart(a):this.donut.drawDonutChart(a);break;case"line":case"area":case"jira":e.hasOwnProperty("bottomOffsetValue")&&(a.bottomOffsetValue=e.bottomOffsetValue),e.hasOwnProperty("leftOffsetValue")&&(a.leftOffsetValue=e.leftOffsetValue),e.maxValue&&(a.highest=e.maxValue),e.minValue&&(a.lowest=e.minValue),e.increment&&(a.increment=e.increment),e.isGuideLineNeeded&&(a.isGuideLineNeeded=e.isGuideLineNeeded),t?Nwagon_ie.line.drawLineChart(a):this.line.drawLineChart(a);break;case"column":case"stacked_column":case"multi_column":e.hasOwnProperty("bottomOffsetValue")&&(a.bottomOffsetValue=e.bottomOffsetValue),e.hasOwnProperty("leftOffsetValue")&&(a.leftOffsetValue=e.leftOffsetValue),e.hasOwnProperty("topOffsetValue")&&(a.topOffsetValue=e.topOffsetValue),e.hasOwnProperty("rightOffsetValue")&&(a.rightOffsetValue=e.rightOffsetValue),e.maxValue&&(a.highest=e.maxValue),e.increment&&(a.increment=e.increment),t?Nwagon_ie.column.drawColumnChart(a):this.column.drawColumnChart(a)}},createChartArea:function(e,t,a,n,r){var o=document.getElementById(e),l=document.createElement("ul");l.className="skip",o.appendChild(l);var i={version:"1.1",width:n,height:r,viewBox:a,class:"Nwagon_"+t,"aria-hidden":"true"},d=Nwagon.createSvgElem("svg",i);return o.appendChild(d),d},createSvgElem:function(e,t){var a=document.createElementNS(CONST_SVG_URL,e);return Nwagon.setAttributes(a,t),a},setAttributes:function(e,t){for(var a=Object.keys(t),n=a.length,r=0;r<n;r++)e.setAttribute(a[r],t[a[r]])},getMax:function(e){var t=0;if(e.length)for(var a=0;a<e.length;a++){var n=e[a];if(n.length)for(var r=0;r<n.length;r++)"number"==typeof n[r]&&n[r]>t&&(t=n[r]);else"number"==typeof e[a]&&e[a]>t&&(t=e[a])}return t},createTooltip:function(){var e=Nwagon.createSvgElem("g",{class:"chart__tooltip"}),t=Nwagon.createSvgElem("rect",{});e.appendChild(t);var a=Nwagon.createSvgElem("text",{});return e.appendChild(a),e},showToolTip:function(e,t,a,n,r,o,l){return function(){e.style.cssText="display: block";var i=e.getElementsByTagName("text")[0];i.textContent=" "+n,Nwagon.setAttributes(i,{x:t,y:a-o,"text-anchor":"middle"});var d=i.getBBox().width;Nwagon.setAttributes(e.getElementsByTagName("rect")[0],{x:t-d/2-5,y:a-l,width:d+10,height:r})}},hideToolTip:function(e){return function(){e.style.cssText="display: none"}},getAngles:function(e,t){for(var a=0,n=0;n<e.length;n++)a+=e[n];for(n=0;n<e.length;n++){var r=e[n]/a*360;t.angles.push(r),t.percent.push(e[n]/a),t.values.push(e[n])}return t},getOpacity:function(e,t,a){var n=a/e.length;return e[Math.ceil(t/n)-1]},line:{points:[],guide_line:null,drawLabels:function(e,t,a){var n={x:e,y:t,"text-anchor":"end"},r=Nwagon.createSvgElem("text",n);return r.textContent=a,r},drawLineChart:function(e){var t=e.chartType,a="area"==t,n="jira"==t,r=e.width,o=e.height,l=e.dataset.values,i=e.hasOwnProperty("leftOffsetValue")?e.leftOffsetValue:50,d=e.hasOwnProperty("bottomOffsetValue")?e.bottomOffsetValue:80,s=e.hasOwnProperty("topOffsetValue")?e.topOffsetValue:0,h=e.hasOwnProperty("rightOffsetValue")?e.rightOffsetValue:0,c=e.legend.names,g=!!e.hasOwnProperty("isGuideLineNeeded")&&e.isGuideLineNeeded;h=e.dataset.fields?150+h:h;var p=-i+" "+(d-o)+" "+r+" "+o,u=Nwagon.createChartArea(e.chart_div,e.chartType,p,r,o),v=e.highest?e.highest:Nwagon.getMax(l),f=e.lowest?e.lowest:0;if(this.drawBackground(u,c.length,e.dataset,e.increment,v,f,r-i-h,o-d-s),this.drawLineForeground(e.chart_div,u,e.legend,e.dataset,e.increment,v,f,r-i-h,o-d-s,a,n,g),Nwagon.line.guide_line){var m=Nwagon.line.guide_line,w=Math.floor((r-i-h)/c.length),_=m.x1.animVal.value,C=0,y=e.dataset.fields,N=y?14*y.length:14,x=Nwagon.createTooltip(),M=x.getElementsByTagName("text")[0];if(M)for(var E=0;E<y.length;E++){var S=Nwagon.createSvgElem("tspan",{});M.appendChild(S)}u.appendChild(x);var T=u.createSVGPoint();u.addEventListener("mousemove",function(e){var t=function(e){return T.x=e.clientX,T.y=e.clientY,T.matrixTransform(u.getScreenCTM().inverse())}(e),a=t.x;if(a<0&&(a=0),a>_&&(a=_),t.y<0){if(m.setAttribute("x1",a),m.setAttribute("x2",a),C=Math.floor(a/w),x.style.cssText="display: block",y&&l[C])for(var n=M.getElementsByTagName("tspan"),r=0;r<y.length;r++)n[r].setAttribute("x",a),r>0&&n[r].setAttribute("dy",15),n[r].textContent=c[C]+"("+y[r]+"): "+l[C][r];Nwagon.setAttributes(M,{x:a,y:t.y-40,"text-anchor":"start"});var o=M.getBBox().width;Nwagon.setAttributes(x.getElementsByTagName("rect")[0],{x:a-5,y:t.y-50,width:o+10,height:N})}},!1),u.addEventListener("mouseout",function(e){x.style.cssText="display:none"},!1)}},drawJiraForeground:function(e,t,a){var n=function(e,t){var a,n={};return a=t[1]==e[1]?0:(t[1]-e[1])/(t[0]-e[0]),n.alpha=e[1]-a*e[0],n.slope=a,n},r=function(e,t){if(e&&t){for(var n,r,o,l,d,s="",h=0;h<e.length;){if(e[h][1]>t[h][1]){r=e,o=t,n=a[0];break}if(e[h][1]<t[h][1]){r=t,o=e,n=a[1];break}h++}for(var c=0;c<r.length;)l=r[c][0],d=r[c][1],s+=0===c?"M "+l+" -"+d:" L "+l+" -"+d,c++;for(var g=o.length-1;g>=0;)s+=" L "+(l=o[g][0])+" -"+(d=o[g][1]),g--;s+=" Z";var p=Nwagon.createSvgElem("path",{d:s,fill:n,opacity:"0.7"});i.appendChild(p)}},o=document.getElementById(e).querySelectorAll(".Nwagon_jira g.foreground"),l=o[o.length-1],i=Nwagon.createSvgElem("g",{class:"polygon"});l.appendChild(i);var d=[];if(2==t.length){a[0],a[1];var s=t[0],h=t[1],c=[],g=[];if(s.length===h.length)for(var p=s.length,u=0;u<p;u++)if(c.push(s[u]),g.push(h[u]),s[u][1]>h[u][1]?d.push(h[u]):d.push(s[u]),u!==p-1&&!(s[u][1]>h[u][1]&&s[u+1][1]>h[u+1][1]||s[u][1]<h[u][1]&&s[u+1][1]<h[u+1][1]||s[u][1]==h[u][1]||s[u+1][1]==h[u+1][1])){var v=[],f=n(s[u],s[u+1]),m=n(h[u],h[u+1]),w=f.slope,_=m.slope,C=f.alpha,y=(x=(m.alpha-C)/(w-_))*w+C;v.push(x),v.push(y),d.push(v),c.push(v),c.push(v),g.push(v),g.push(v)}}if(d.length){var N="";for(u=0;u<d.length;u++){var x=d[u][0];y=d[u][1];N+=0===u?"M "+x+" -"+y:" L "+x+" -"+y}N+=" L "+d[d.length-1][0]+" -0 L 0 0 Z";var M=Nwagon.createSvgElem("path",{d:N,class:"layered"});i.appendChild(M)}if(c.length===g.length)for(u=0;u<c.length;){if(c[u][1]==g[u][1]&&0!=u||u==c.length-1){var E=c.splice(u+1),S=g.splice(u+1);r(c,g),c=E,g=S,u=0}u++}},draw_vertex_and_tooltip:function(e,t,a){var n=Nwagon.createSvgElem("g",{class:"circles"});if(e.appendChild(n),!a){var r=Nwagon.createTooltip();e.appendChild(r)}for(var o=0;o<t.length;o++){var l=Nwagon.createSvgElem("circle",t[o].attributes);n.appendChild(l),a||(l.onmouseover=Nwagon.showToolTip(r,t[o].tooltip_x,t[o].tooltip_y,t[o].text,14,7,18),l.onmouseout=Nwagon.hideToolTip(r))}},drawLineForeground:function(e,t,a,n,r,o,l,i,d,s,h,c){var g,p=a.names.length,u=(i/p).toFixed(3),v=(Math.ceil((o-l)/r)+1)*r,f="",m=a.names,w=n.values,_=n.colorset,C=n.fields,y=[],N=[],x=Nwagon.createSvgElem("g",{class:"foreground"});t.appendChild(x);var M=Nwagon.createSvgElem("g",{class:"lines"});x.appendChild(M);var E=Nwagon.createSvgElem("g",{class:"labels"});if(x.appendChild(E),g=.6*u,w[0])for(var S=0;S<w[0].length;S++){var T=document.getElementById(e).getElementsByTagName("ul")[0];if(T){var b=document.createElement("li");b.innerHTML=C[S];var A=document.createElement("ul");b.appendChild(A),T.appendChild(b)}for(var L=0,k="",O=[],F=0,V=0;V<w.length;V++){var P={},I=[];f=u*V;var B=(w[V][S]-l)/v*d;if(isNaN(B))F++;else{V===F?(k+="M "+f+" -"+B,L=B):k+=" L "+f+" -"+B,I.push(f),I.push(B),O.push(I);var D={cx:f,cy:"-"+B,r:2,stroke:_[S],fill:_[S]},H=m[V]+"("+C[S]+"): "+w[V][S].toString();if(P.attributes=D,P.text=H,P.tooltip_x=f+g/2,P.tooltip_y=-B,y.push(P),A){var R=document.createElement("li");R.innerHTML="Label "+m[V]+",  Value "+w[V][S].toString(),A.appendChild(R)}}if(0===S){var X=Nwagon.line.drawLabels(f+g/2,15,m[V],!1,0);E.appendChild(X)}}var z=Nwagon.createSvgElem("path",{d:k,fill:"none",stroke:_[S]});if(s){var U=k+" L "+f+" 0 L 0 0 L 0 -"+L+" Z",Z=Nwagon.createSvgElem("path",{d:U,fill:_[S],opacity:"0.8"});M.appendChild(Z)}M.appendChild(z),N.push(O)}h&&Nwagon.line.drawJiraForeground(e,N,_),c&&(Nwagon.line.guide_line=Nwagon.createSvgElem("line",{x1:p*u,y1:4,x2:p*u,y2:-d,class:"guide_line"}),t.appendChild(Nwagon.line.guide_line)),Nwagon.line.draw_vertex_and_tooltip(x,y,c)},drawBackground:function(e,t,a,n,r,o,l,i){var d=(l/t).toFixed(3),s={},h="",c=Nwagon.createSvgElem("g",{class:"chart__background"});e.appendChild(c);var g=Math.ceil((r-o)/n),p=i/(g+1);s={x1:"0",y1:"0",x2:"0",y2:p/2-i,class:"v"};var u=Nwagon.createSvgElem("line",s);c.appendChild(u);for(var v=0;v<t;v++)s={x1:h=v*d,y1:4,x2:h,y2:-1,class:"v"},u=Nwagon.createSvgElem("line",s),c.appendChild(u);var f=0;for(v=0;v<=g;v++){var m=0===v?"h":"h_dash";s={x1:"-3",y1:"-"+v*p,x2:(t*d).toString(),y2:"-"+v*p,class:m},u=Nwagon.createSvgElem("line",s),c.appendChild(u),s={x:"-15",y:-(f*p-3),"text-anchor":"end"};var w=Nwagon.createSvgElem("text",s);w.textContent=(f*n+o).toString(),c.appendChild(w),f++}if(a.fields){var _=Nwagon.createSvgElem("g",{class:"p-fields"});c.appendChild(_);var C=a.fields.length;for(v=0;v<C;v++){h=l+20,py=30*v-i+p,s={x:h,y:py,width:20,height:15,fill:a.colorset[v]};var y=Nwagon.createSvgElem("rect",s);_.appendChild(y),s={x:h+30,y:py+7,"alignment-baseline":"central"};var N=Nwagon.createSvgElem("text",s);N.textContent=a.fields[v],_.appendChild(N)}}}},column:{drawColumnChart:function(e){var t=e.width,a=e.height,n=e.dataset.values,r=e.hasOwnProperty("leftOffsetValue")?e.leftOffsetValue:50,o=e.hasOwnProperty("bottomOffsetValue")?e.bottomOffsetValue:80,l=e.hasOwnProperty("topOffsetValue")?e.topOffsetValue:0,i=e.hasOwnProperty("rightOffsetValue")?e.rightOffsetValue:0;i=e.dataset.fields?150+i:i;var d=-r+" "+(o-a)+" "+t+" "+a,s=Nwagon.createChartArea(e.chart_div,e.chartType,d,t,a),h=e.highest?e.highest:Nwagon.getMax(n);this.drawBackground(s,e.legend.names.length,e.dataset,e.increment,h,t-r-i,a-o-l),this.drawColumnForeground(e.chart_div,s,e.legend,e.dataset,e.increment,h,t-r-i,a-o-l,e.chartType)},drawColumn:function(e,t,a){var n=Nwagon.createSvgElem("rect",{x:"0",y:-a,width:t,height:a});return e.appendChild(n),n},drawLabels:function(e,t,a){var n={x:e,y:t,"text-anchor":"end"},r=Nwagon.createSvgElem("text",n);return r.textContent=a,r},getColorSetforSingleColumnChart:function(e,t,a){for(var n=a.length,r=e/n,o=[],l=0;l<t.length;l++){var i=Math.floor(t[l]/r);i==n&&i--,o.push(a[i])}return o},drawColumnForeground:function(e,t,a,n,r,o,l,i,d){var s=a.names,h=(l/s.length).toFixed(3),c=(Math.ceil(o/r)+1)*r,g="",p="",u="",v=n.values,f=n.title,m=n.fields,w=Nwagon.createSvgElem("g",{class:"foreground"});t.appendChild(w);var _=Nwagon.createSvgElem("g",{class:"columns"});w.appendChild(_);var C=Nwagon.createSvgElem("g",{class:"labels"});w.appendChild(C);var y=Nwagon.createTooltip();w.appendChild(y);var N=function(e,t,a,n,r,o,l){var i=Nwagon.createSvgElem("g",{});e.appendChild(i);var d=Nwagon.column.drawColumn(i,p,t);if(Nwagon.setAttributes(d,{x:a,style:"fill:"+n}),o){var s=l-d.getBBox().y;s>0&&Nwagon.setAttributes(d,{y:-s}),t=s}d.onmouseover=Nwagon.showToolTip(y,a+p/2,-t,r,14,7,18),d.onmouseout=Nwagon.hideToolTip(y),d=null},x=function(t){var a=document.getElementById(e).getElementsByTagName("ul")[0];if(a)for(var n in t)if(t.hasOwnProperty(n)){var r=document.createElement("li");r.innerHTML=n;var o=document.createElement("ul");r.appendChild(o),a.appendChild(r);for(var l=t[n],i=0;i<l.length;i++){var d=document.createElement("li");d.innerHTML=l[i],o.appendChild(d)}}};if("column"==d){var M=document.getElementById(e).getElementsByTagName("ul")[0];M&&(M.innerHTML=f),p=.6*h;for(var E=Nwagon.column.getColorSetforSingleColumnChart(o,v,n.colorset),S=0;S<v.length;S++){g=h*(S+.2),N(_,u=v[S]/c*i,g,E[S],v[S]);var T=Nwagon.column.drawLabels(g+p/2,15,s[S],!1,0);C.appendChild(T);var b=document.createElement("li");b.innerHTML="Label "+s[S]+", Value  "+v[S],M&&M.appendChild(b)}}else if("multi_column"==d){E=n.colorset;p=.6*h/E.length;for(var A={},L=0;L<m.length;L++)A[m[L]]=[];for(var k=0;k<v.length;k++){var O=v[k];g=h*(k+.2);for(S=0;S<O.length;S++){var F=g+S*p;N(_,u=O[S]/c*i,F,E[S],O[S],!1,0),A[m[S]].push("Label "+s[k]+", Value  "+O[S])}T=Nwagon.column.drawLabels(g+p/2,15,s[k]);C.appendChild(T)}x(A)}else if("stacked_column"==d){p=.6*h;for(E=n.colorset,A={},L=0;L<m.length;L++)A[m[L]]=[];for(k=0;k<v.length;k++){O=v[k];var V=0;for(S=0;S<O.length;S++)g=h*(k+.2),N(_,u=O[S]/c*i,g,E[S],O[S],!0,V),A[m[S]].push("Label "+s[k]+", Value  "+O[S]),V+=u;T=Nwagon.column.drawLabels(g+p/2,15,s[k]);C.appendChild(T)}x(A)}},drawBackground:function(e,t,a,n,r,o,l){var i=(o/t).toFixed(3),d={},s="",h=Nwagon.createSvgElem("g",{class:"chart__background"});e.appendChild(h);var c=Math.ceil(r/n);rowHeight=l/(c+1);for(var g=0;g<=t;g++){d={x1:s=(g*i).toString(),y1:"0",x2:s,y2:rowHeight-l,class:"v"};var p=Nwagon.createSvgElem("line",d);h.appendChild(p)}var u=0;for(g=0;g<=c;g++){d={x1:"0",y1:"-"+g*rowHeight,x2:(t*i).toString(),y2:"-"+g*rowHeight,class:"h"};p=Nwagon.createSvgElem("line",d);h.appendChild(p),d={x:"-15",y:-(u*rowHeight-3),"text-anchor":"end"};var v=Nwagon.createSvgElem("text",d);v.textContent=(u*n).toString(),h.appendChild(v),u++}if(a.fields){var f=Nwagon.createSvgElem("g",{class:"chart__fields"});h.appendChild(f);var m=a.fields.length;for(g=0;g<m;g++){s=o+20,py=30*g-l+rowHeight,d={x:s,y:py,width:20,height:15,fill:a.colorset[g]};var w=Nwagon.createSvgElem("rect",d);f.appendChild(w),d={x:s+25,y:py+7,"alignment-baseline":"central"};var _=Nwagon.createSvgElem("text",d);_.textContent=a.fields[g],f.appendChild(_)}}}},donut:{drawDonutChart:function(e){var t=e.width,a=e.height,n="-"+t/3+" -"+a/2+" "+t+" "+a,r=Nwagon.createChartArea(e.chart_div,e.chartType,n,t,a),o={angles:[],percent:[],values:[]},l=e.dataset.values;l&&(o=Nwagon.getAngles(l,o)),this.drawDonut(e.chart_div,o,e.chartType,r,e.dataset,e.core_circle_radius,e.donut_width),0==e.core_circle_radius?this.drawField(e.dataset.fields,e.dataset.colorset,r,e.donut_width/2):this.drawField(e.dataset.fields,e.dataset.colorset,r,e.donut_width)},drawDonut:function(e,t,a,n,r,o,l){var i=l+o,d=document.getElementById(e).getElementsByTagName("ul")[0],s=function(e){if(d){var t=document.createElement("li");t.innerHTML=e,d.appendChild(t)}},h=Nwagon.createSvgElem("g",{class:"foreground"});n.appendChild(h);var c=Nwagon.createSvgElem("g",{class:"donuts"});h.appendChild(c);var g=Nwagon.createTooltip();h.appendChild(g);for(var p=r.colorset,u=t.angles.length,v=0,f=0,m="",w="",_=r.fields,C=0,y=angle_in_int=angle_in_int_accumulate=0,N=0;N<u;N++){var x;if(t.percent[N]<1){if(y=2*Math.PI*t.percent[N],angle_in_int=t.angles[N],N>0&&(angle_in_int_accumulate+=t.angles[N-1]),o>0)if(y){v=i*Math.sin(y),f=y?-i*Math.sin(y)/Math.tan(y):0;var M=o*Math.sin(y),E=y?-o*Math.sin(y)/Math.tan(y):0;y>Math.PI?(m="M0 "+-o+" L0 -"+i+" A "+i+" "+i+" 0 1 1 "+v+" "+f+" L "+M+" "+E,m+=" A "+o+" "+o+" 0 1 0 0 "+-o+" Z"):(m="M0 "+-o+" L0 -"+i+" A "+i+" "+i+" 0 0 1 "+v+" "+f+" L "+M+" "+E,m+=" A "+o+" "+o+" 0 0 0 0 "+-o+" Z")}else m="M0 0 L 0 0 Z";else y?(v=i*Math.sin(y),f=y?-i*Math.sin(y)/Math.tan(y):0,m=y>Math.PI?"M0 0 L0 -"+i+" A "+i+" "+i+" 0 1 1 "+v+" "+f+" L0 0 Z":"M0 0 L0 -"+i+" A "+i+" "+i+" 0 0 1 "+v+" "+f+" L0 0 Z"):m="M0 0 L 0 0 Z";x=Nwagon.createSvgElem("path",{class:"sector",d:m,fill:p[N]}),c.appendChild(x)}else{var S={cx:0,cy:0,r:i,stroke:"transparent",fill:p[N]};if(x=Nwagon.createSvgElem("circle",S),c.appendChild(x),o>0){var T={cx:0,cy:0,r:o,stroke:"transparent","fill-opacity":1,fill:"white"},b=Nwagon.createSvgElem("circle",T);c.appendChild(b)}}C=t.angles.length?angle_in_int_accumulate:angle_in_int*N;var A=document.querySelectorAll("#"+e+" .Nwagon_"+a+" .foreground .sector");if(A.length>0)A[A.length-1].setAttribute("transform","rotate("+C+")");var L=Math.PI*(C-90)/180,k=i*Math.sin(L),O=i*Math.cos(L),F=t.values[N].toFixed(0);w=_[N]?_[N]+"("+(100*t.percent[N]).toFixed(1)+"%) "+F:"undefiend",x.onmouseover=Nwagon.showToolTip(g,O,k,w,14,7,18),x.onmouseout=Nwagon.hideToolTip(g),s(w)}},drawField:function(e,t,a,n){if(e.length){var r=Nwagon.createSvgElem("g",{class:"chart__fields"});a.appendChild(r);for(var o={},l=e.length,i=0;i<l;i++){var d=4*n,s=30*i-15*l;o={x:d,y:s,width:20,height:15,fill:t[i]};var h=Nwagon.createSvgElem("rect",o);r.appendChild(h),o={x:d+25,y:s+10,"alignment-baseline":"central"};var c=Nwagon.createSvgElem("text",o);c.textContent=e[i],r.appendChild(c)}}}},polar:{drawPolarChart:function(e){var t=e.dataset.fields?150:0,a=e.width,n=e.height,r="-"+a/2+" -"+n/2+" "+a+" "+n,o=Nwagon.createChartArea(e.chart_div,e.chartType,r,a,n),l={angles:[],percent:[],values:[]};if("polar_pie"==e.chartType){var i=e.dataset.degree_values;i&&(l=Nwagon.getAngles(i,l))}o&&e.legend.names&&e.dataset&&(this.drawBackground(o,l.angles,e.chartType,e.legend.names,e.dataset,e.increment,e.max,e.core_circle_radius,a/2-t,n/2-80),this.drawLabels(o,l,e.legend,CONST_MAX_RADIUS,e.core_circle_radius),e.core_circle_radius>0&&e.core_circle_value&&this.drawCoreCircleValue(o,e.core_circle_value,e.core_circle_radius),this.drawForeground(e.chart_div,l,e.chartType,o,e.legend,e.dataset,e.core_circle_radius,e.max)),this.drawCoordinates(o,e.increment,e.max,e.core_circle_radius)},drawCoordinates:function(e,t,a,n){for(var r=Nwagon.createSvgElem("g",{class:"xAxis"}),o=a;o>0;){var l={points:"0,"+-(o+n),x:0,y:-(o+n),"text-anchor":"middle"},i=Nwagon.createSvgElem("text",l);i.textContent=o.toString(),r.appendChild(i),o-=t}e.appendChild(r)},drawCoreCircleValue:function(e,t,a){var n=Nwagon.createSvgElem("g",{class:"core"});e.appendChild(n);var r={x:"0",y:a/4,"text-anchor":"middle",class:"core_text"},o=Nwagon.createSvgElem("text",r);o.textContent=t,n.appendChild(o)},drawLabels:function(e,t,a,n,r){var o=Nwagon.createSvgElem("g",{class:"labels"});e.appendChild(o);for(var l=a.names,i=l.length,d=angle_accumulate=0,s=0;s<i;s++){t.percent.length?(d=2*Math.PI*t.percent[s],s>0&&(angle_accumulate+=2*Math.PI*t.percent[s-1])):(d=2*Math.PI/i,angle_accumulate=d*s);var h=l[s];if(h)for(var c=h.length,g=0;g<c;g++){var p=d/c,u=angle_accumulate+p*g+p/2,v=-(n+r+12)*Math.cos(u),f=(n+r+12)*Math.sin(u),m=f<0?"end":"start";f<1&&f>-1&&(m="middle");var w={x:f,y:v,"text-anchor":m,class:"chart_label"},_=Nwagon.createSvgElem("text",w);_.textContent=h[g],o.appendChild(_)}}},drawForeground:function(e,t,a,n,r,o,l,i){var d=document.getElementById(e).getElementsByTagName("ul")[0],s=function(e){if(d){var t=document.createElement("li");t.innerHTML=e,d.appendChild(t)}},h=Nwagon.createSvgElem("g",{class:"foreground"});n.appendChild(h);var c=Nwagon.createSvgElem("g",{class:"pies"});h.appendChild(c);var g=Nwagon.createTooltip();h.appendChild(g);var p=o.colorset,u=o.values,v=o.opacity,f=u.length,m=0,w=0,_="",C="",y=r.names,N=0,x=angle_in_int=angle_in_int_accumulate=0;if(f)for(var M=0;M<f;M++){t.angles.length?(x=2*Math.PI*t.percent[M],angle_in_int=t.angles[M],M>0&&(angle_in_int_accumulate+=t.angles[M-1])):(x=2*Math.PI/f,angle_in_int=360/f);for(var E=u[M],S=E.length,T=0;T<S;T++){var b=E[T],A=.8;v.length&&(A=Nwagon.getOpacity(v,b,i));var L=x/S,k=angle_in_int/S;if(l>0){m=(b+=l)*Math.sin(L),w=-b*Math.sin(L)/Math.tan(L);var O=l*Math.sin(L),F=-l*Math.sin(L)/Math.tan(L);L>Math.PI?(_="M0 "+-l+" L0 -"+b+" A "+b+" "+b+" 0 1 1 "+m+" "+w+" L "+O+" "+F,_+=" A "+l+" "+l+" 0 1 0 0 "+-l+" Z"):(_="M0 "+-l+" L0 -"+b+" A "+b+" "+b+" 0 0 1 "+m+" "+w+" L "+O+" "+F,_+=" A "+l+" "+l+" 0 0 0 0 "+-l+" Z")}else _="M0 0 L0 -"+b+" A "+b+" "+b+" 0 0 1 "+(m=b*Math.sin(L))+" "+(w=-b*Math.sin(L)/Math.tan(L))+" L0 0 Z";var V=Nwagon.createSvgElem("path",{class:"sector",d:_,fill:p[M],opacity:A});c.appendChild(V),N=t.angles.length?angle_in_int_accumulate+k*T:angle_in_int*M+k*T;var P=document.querySelectorAll("#"+e+" .Nwagon_"+a+" .foreground .sector");if(P.length>0)P[P.length-1].setAttribute("transform","rotate("+N+")");var I=Math.PI*(N-90)/180,B=(l+i)*Math.sin(I),D=(l+i)*Math.cos(I);if(t.values.length){var H=t.values[M].toFixed(0);C=y[M][T]?y[M][T]+" ("+H+"), Value: "+(b-l).toFixed(1):"undefiend"}else C=y[M][T]?y[M][T]+", Value: "+(b-l).toFixed(1):"undefiend";V.onmouseover=Nwagon.showToolTip(g,D,B,C,14,7,18),V.onmouseout=Nwagon.hideToolTip(g),s(C)}}},drawBackground:function(e,t,a,n,r,o,l,i,d,s){var h=Nwagon.createSvgElem("g",{class:"chart__background"});e.appendChild(h);var c=r.values;if(c.length){var g=360/c.length,p=function(e){var t="M0 "+e+"A "+e+" "+e+" 0 0 0 0 -"+e,a=Nwagon.createSvgElem("path",{d:t});h.appendChild(a),t="M0 "+e+"A "+e+" "+e+" 0 0 1 0 -"+e,a=Nwagon.createSvgElem("path",{d:t}),h.appendChild(a)};i>0&&p(i);for(var u=l+i;u>i;)p(u),u-=o;for(var v=0,f=0;f<c.length;f++){t.length?v+=t[f]:v=g*f;var m={x1:"0",y1:-i,x2:"0",y2:-(l+i),class:"v"},w=Nwagon.createSvgElem("line",m);h.appendChild(w),w.setAttribute("transform","rotate("+v+")");var _=c[f];if(_)for(var C=_.length,y=1;y<C;y++){var N=v+g/C*y;w=Nwagon.createSvgElem("line",m),h.appendChild(w),w.setAttribute("transform","rotate("+N+")")}}}var x=r.fields,M=r.colorset;if(x.length){var E=Nwagon.createSvgElem("g",{class:"chart__fields"});h.appendChild(E);for(var S=x.length,T=0;T<S;T++){px=d+20,py=30*T-s,m={x:px,y:py,width:20,height:15,fill:M[T]};var b=Nwagon.createSvgElem("rect",m);E.appendChild(b),m={x:px+25,y:py+10,"alignment-baseline":"central"};var A=Nwagon.createSvgElem("text",m);A.textContent=x[T],E.appendChild(A)}}}},radar:{drawRadarChart:function(e){var t=e.width,a=e.height,n="-"+t/2+" -"+a/2+" "+t+" "+a,r=Nwagon.createChartArea(e.chart_div,e.chartType,n,t,a);this.drawBackground(r,e.legend.names.length,e.dataset.bgColor,CONST_DECREMENT,CONST_MAX_RADIUS),this.drawLabels(r,e.legend,CONST_MAX_RADIUS),this.drawCoordinates(r,CONST_DECREMENT,CONST_MAX_RADIUS),this.drawPolygonForeground(e.chart_div,r,e.legend,e.dataset)},drawCoordinates:function(e,t,a){for(var n=Nwagon.createSvgElem("g",{class:"xAxis"}),r=a;r>0;){var o={points:r+",0",x:r,y:0,"text-anchor":"middle"},l=Nwagon.createSvgElem("text",o);l.textContent=r.toString(),n.appendChild(l),r-=t}e.appendChild(n)},drawLabels:function(e,t,a){for(var n=Nwagon.createSvgElem("g",{class:"labels"}),r=t.hrefs,o=t.names,l=o.length,i={},d=0;d<o.length;d++){Math.PI;var s=0+(a+12)*Math.cos(2*Math.PI/l*d),h=0+(a+12)*Math.sin(2*Math.PI/l*d),c=s<0?"end":"start";s<1&&s>-1&&(c="middle"),i=r?{onclick:'location.href="'+r[d]+'"',x:s,y:h,"text-anchor":c,class:"chart_label"}:{x:s,y:h,"text-anchor":c,class:"chart_label"};var g=Nwagon.createSvgElem("text",i);g.textContent=o[d],n.appendChild(g)}e.appendChild(n)},drawPie:function(e,t,a,n,r){for(var o=2*Math.PI/t,l="",i="",d="",s={},h="",c=a,g=Nwagon.createSvgElem("g",{class:"pie"});c>0;){if(l=c+",0",i="0,0",d=c*Math.sin(o)/Math.tan(o)+","+-c*Math.sin(o),c==a){h=l+" "+i+" "+d;var p=Nwagon.createSvgElem("polyline",{points:h,fill:r});g.appendChild(p)}s={points:h=l+" "+d,"stroke-dasharray":"2px,2px",fill:r};var u=Nwagon.createSvgElem("polyline",s);g.appendChild(u),c-=n}return e.appendChild(g),g},drawBackground:function(e,t,a,n,r){var o=a||"#F9F9F9",l=360/t,i=Nwagon.createSvgElem("g",{class:"chart__background"});e.appendChild(i);for(var d=1;d<=t;d++){this.drawPie(i,t,r,n,o).setAttribute("transform","rotate("+l*(d-1)+")")}},dimmedPie:function(e,t,a){var n=360/a*t,r=this.drawPie(e,a,CONST_MAX_RADIUS,CONST_DECREMENT);r.setAttribute("transform","rotate("+n+")");for(var o=r.querySelectorAll("polyline"),l=0;l<o.length;l++)o[l].setAttribute("class","dim");(t+1)%a==0?this.drawPie(e,a,CONST_MAX_RADIUS,CONST_DECREMENT):(n=360/a*(t+1),(r=this.drawPie(e,a,CONST_MAX_RADIUS,CONST_DECREMENT)).setAttribute("transform","rotate("+n+")"));for(o=r.querySelectorAll("polyline"),l=0;l<o.length;l++)o[l].setAttribute("class","dim")},drawPolygonForeground:function(e,t,a,n){var r=n.values,o=n.title,l=n.fgColor?n.fgColor:"#30A1CE",i=1==r.length,d=a.names,s=document.getElementById(e).getElementsByTagName("ul")[0];s&&(s.innerHTML=o);for(var h=0;h<r.length;h++){if(s){var c=document.createElement("li");c.innerHTML="Data set number "+(h+1).toString();var g=document.createElement("ul");c.appendChild(g),s.appendChild(c)}var p=r[h],u=p.length,v=[],f=Math.PI/180*(360/u),m=0,w=0;py=0,E={};var _=Nwagon.createSvgElem("g",{class:"foreground"});t.appendChild(_);var C=Nwagon.createSvgElem("polyline",{class:"polygon"});_.appendChild(C);var y={};i&&(y=Nwagon.createTooltip());for(var N=0;N<p.length;N++){if(g){var x=document.createElement("li");x.innerHTML=d[N]+": "+p[N],g.appendChild(x)}m=p[N],pointDisplay=p[N],"number"!=typeof p[N]&&(Nwagon.radar.dimmedPie(_,N,u),m=0,pointDisplay=p[N]),w=0==N?m:m*Math.sin(f*N)/Math.tan(f*N),py=0==N?0:m*Math.sin(f*N),v.push(w+","+py),E={cx:w,cy:py,r:3,"stroke-width":8,stroke:"transparent",fill:l};var M=Nwagon.createSvgElem("circle",E);i&&(M.onmouseover=Nwagon.showToolTip(y,w,py,d[N]+" : "+pointDisplay,20,15,28),M.onmouseout=Nwagon.hideToolTip(y)),_.appendChild(M),M=null}var E={points:v.join(" "),class:"polygon",fill:l,stroke:l};Nwagon.setAttributes(C,E),i&&_.appendChild(y)}}}},Nwagon_ie={setStyles:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e.style[a]=t[a])},setAttributes:function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.setAttribute(a,t[a])},createChartArea:function(e,t,a){var n=document.getElementById(e);n.style.cssText="width: "+t+"px; height:"+a+"px";var r=document.createElement("ul");r.className="skip",n.appendChild(r);var o=document.createElement("v:group");o.setAttribute("class",e),o.setAttribute("coordsize",t+" "+a),o.setAttribute("aria-hidden","true"),o.style.cssText="width: "+t+"px; height:"+a+"px;position:absolute;";var l=document.createElement("v:rect"),i={width:t+"px",height:a+"px"};return Nwagon_ie.setStyles(l,i),l.setAttribute("stroked","true"),o.appendChild(l),n.appendChild(o),o},createTooltip:function(e){var t=document.createElement("div"),a=document.createTextNode("");return t.appendChild(a),e.appendChild(t),t},showToolTip:function(e,t,a,n){return function(){e.style.cssText="display: block; padding: 0 5px 0 5px; background-color:#f9f9f9; border: 1px solid #666; position:absolute; z-index:100",e.lastChild.nodeValue=n,e.style.left=t+"px",e.style.top=a-15+"px",e.style.fontSize="12px"}},hideToolTip:function(e){return function(){e.style.cssText="display: none"}},drawWedges:function(e,t,a,n,r,o,l){var i=document.createElement("v:shape"),d=Math.round(65535*r),s=-Math.round(65536*o);return attributes={path:"M "+e+" "+t+" AE "+e+" "+t+" "+a+" "+a+" "+d+" "+s+" X E",fillcolor:n,strokecolor:"#FFFFFF",strokeweight:"0px"},Nwagon_ie.setAttributes(i,attributes),Nwagon_ie.setStyles(i,l),i},drawVertex:function(e,t,a){var n=document.createElement("v:oval");return n.setAttribute("fillcolor",a),n.setAttribute("strokecolor",a),n.setAttribute("strokeweight","1px"),n.style.cssText="z-index:99; width:6px; height:6px",n.style.top=t-3+"px",n.style.left=e-3+"px",n},drawFields_for_circular_type_chart:function(e,t,a,n){var r={};if(e.length){var o=document.createElement("div");r={width:Math.round(n/2)+"px",height:Math.round(n*(2/3))+"px",left:n+"px",top:"70px",position:"absolute"},Nwagon_ie.setStyles(o,r),o.className="fields_area",a.appendChild(o);for(var l={},i=0;i<e.length;i++){var d=document.createElement("v:rect");r={width:"20px",height:"15px",left:"5px",top:10+30*i+"px"},Nwagon_ie.setStyles(d,r),l={fillcolor:t[i],strokecolor:"#FFFFFF",strokeweight:"1px"},Nwagon_ie.setAttributes(d,l),o.appendChild(d);var s=document.createElement("div");s.appendChild(document.createTextNode(e[i])),r={position:"absolute",left:"35px",top:10+30*i+"px",fontSize:"12px"},Nwagon_ie.setStyles(s,r),o.appendChild(s)}}},column:{drawColumnChart:function(e){var t=e.width,a=e.height,n=Nwagon_ie.createChartArea(e.chart_div,t,a),r=e.dataset.values,o=e.hasOwnProperty("leftOffsetValue")?e.leftOffsetValue:50,l=e.hasOwnProperty("bottomOffsetValue")?e.bottomOffsetValue:80,i=e.highest?e.highest:Nwagon.getMax(r),d=e.dataset.fields&&"column"!=e.chartType||"column"==e.chartType&&1==e.dataset.colorset.length;this.drawBackground(n,e.legend.names,e.dataset,e.increment,i,t,a,o,l,d),this.drawColumnForeground(e.chart_div,n,e.legend,e.dataset,e.increment,i,t,a,o,l,e.chartType,d)},drawColumnForeground:function(e,t,a,n,r,o,l,i,d,s,h,c){var g=a.names,p=g.length,u=n.values,v=n.title,f=n.fields,m=c?150:0,w=Math.floor((l-d-m)/p),_=0,C=0,y=0,N=0,x=0,M=(Math.ceil(o/r),o/r),E=Math.round((i-s)/(M+1)),S=E/r,T=[],b={},A={},L=Nwagon_ie.createTooltip(t),k="",O=function(e,t,a,n,r,o,l){var i=document.createElement("v:shape");return Nwagon_ie.setAttributes(i,e),A={position:"absolute",width:t,height:a,filter:"alpha(opacity=80)"},Nwagon_ie.setStyles(i,A),i.onmouseover=Nwagon_ie.showToolTip(l,n,r,o),i.onmouseout=Nwagon_ie.hideToolTip(l),i},F=function(t){var a=document.getElementById(e).getElementsByTagName("ul")[0];if(a)for(var n in t)if(t.hasOwnProperty(n)){var r=document.createElement("li");r.innerHTML=n;var o=document.createElement("ul");r.appendChild(o),a.appendChild(r);for(var l=t[n],i=0;i<l.length;i++){var d=document.createElement("li");d.innerHTML=l[i],o.appendChild(d)}}};if("column"==h){var V=document.getElementById(e).getElementsByTagName("ul")[0];V&&(V.innerHTML=v),x=1*w/5,T=Nwagon.column.getColorSetforSingleColumnChart(o,u,n.colorset);for(var P=0;P<u.length;P++){_=d+Math.round(w*(P+.2)),C=Math.round(d+w*(P+1)-x),b={path:"M "+_+" "+(y=i-s)+" L "+_+" "+(N=i-s-Math.round(S*u[P]))+" L "+C+" "+N+" L "+C+" "+y+" X E",strokecolor:T[P],strokeweight:"1px",fillcolor:T[P]},k=u[P].toString();var I=O(b,t.style.width,t.style.height,_+5,N+E,k,L);t.appendChild(I);var B=document.createElement("li");B.innerHTML="Label "+g[P]+", Value  "+u[P],V&&V.appendChild(B)}}if("multi_column"==h){x=.6*w/(T=n.colorset).length;for(var D={},H=0;H<f.length;H++)D[f[H]]=[];for(P=0;P<u.length;P++){var R=u[P],X=d+Math.round(w*(P+.2));for(H=0;H<R.length;H++){_=X+Math.round(H*x),C=X+Math.round((H+1)*x),b={path:"M "+_+" "+(y=i-s)+" L "+_+" "+(N=i-s-Math.round(S*R[H]))+" L "+C+" "+N+" L "+C+" "+y+" X E",strokecolor:T[H],strokeweight:"1px",fillcolor:T[H]},k=R[H].toString();I=O(b,t.style.width,t.style.height,_+5,N+E,k,L);t.appendChild(I),D[f[H]].push("Label "+g[P]+", Value  "+R[H])}}F(D)}if("stacked_column"==h){T=n.colorset,x=1*w/5;for(D={},H=0;H<f.length;H++)D[f[H]]=[];for(P=0;P<u.length;P++){R=u[P];var z=i-s;for(X=d+Math.round(w*(P+.2)),H=0;H<R.length;H++){_=d+Math.round(w*(P+.2)),C=Math.round(d+w*(P+1)-x),b={path:"M "+_+" "+(y=z)+" L "+_+" "+(N=z-Math.round(S*R[H]))+" L "+C+" "+N+" L "+C+" "+y+" X E",strokecolor:T[H],strokeweight:"1px",fillcolor:T[H]},k=R[H].toString();I=O(b,t.style.width,t.style.height,_+5,N+E,k,L);t.appendChild(I),D[f[H]].push("Label "+g[P]+", Value  "+R[H]),z-=Math.round(S*R[H])}}F(D)}if(f&&"column"!=h||"column"==h&&1==n.colorset.length)for(P=0;P<f.length;P++){var U=l-m+30,Z=document.createElement("v:rect");A={position:"absolute",width:"20px",height:"15px",top:30+30*P+"px",left:U+"px"},Nwagon_ie.setStyles(Z,A),b={fillcolor:T[P],strokecolor:"#FFFFFF",strokeweight:"1px"},Nwagon_ie.setAttributes(Z,b),t.appendChild(Z);var G=document.createElement("div");G.appendChild(document.createTextNode(f[P])),A={position:"absolute",top:30+30*P+"px",left:U+30+"px",fontSize:"12px"},Nwagon_ie.setStyles(G,A),t.appendChild(G)}},drawBackground:function(e,t,a,n,r,o,l,i,d,s){var h=t.length,c=Math.ceil(r/n),g=0,p=0,u=0;if(s)g=150;if(h)u=Math.floor((o-i-g)/h);for(var v=Math.round((l-d)/(c+1)),f=a.values,m={},w={},_=0;_<=f.length;_++){var C=document.createElement("v:shape"),y=i+u*_;if(m={path:"M "+y+" "+(l-d)+"L "+y+" "+(l-d-v*(c+1)),strokecolor:"#CCC",strokeweight:"1px"},Nwagon_ie.setAttributes(C,m),w={position:"absolute",width:e.style.width,height:e.style.height},Nwagon_ie.setStyles(C,w),e.appendChild(C),_<f.length){var N=document.createElement("div");N.appendChild(document.createTextNode(t[_])),N.setAttribute("class","label_ie"),w={position:"absolute",left:y+u/4+"px",top:l-d+15+"px",fontSize:"13px"},Nwagon_ie.setStyles(N,w),e.appendChild(N)}_==f.length&&(p=y)}for(_=0;_<=c;_++){var x=document.createElement("v:shape"),M=l-d-v*_;m={path:"M "+i+" "+M+"L "+p+" "+M,strokecolor:"#CCC",strokeweight:"1px"},Nwagon_ie.setAttributes(x,m),x.style.position="absolute",x.style.width=e.style.width,x.style.height=e.style.height,e.appendChild(x);var E=document.createElement("div"),S=(n*_).toString();E.setAttribute("class","label_ie"),E.appendChild(document.createTextNode(S)),w={position:"absolute",right:o-i+15+"px",top:M-6+"px",fontSize:"13px"},Nwagon_ie.setStyles(E,w),e.appendChild(E)}}},line:{guide_line:null,guide_line_max_left:0,drawLineChart:function(e){var t,a,n=e.chartType,r=e.width,o=e.height,l=Nwagon_ie.createChartArea(e.chart_div,r,o),i=e.leftOffsetValue?e.leftOffsetValue:50,d=e.bottomOffsetValue?e.bottomOffsetValue:80,s=e.legend.names,h=e.dataset.fields,c=e.dataset.values,g=e.highest?e.highest:Nwagon.getMax(c),p=e.lowest?e.lowest:0;t="area"==n,a="jira"==n;var u=!!e.hasOwnProperty("isGuideLineNeeded")&&e.isGuideLineNeeded;if(this.drawBackground(l,s,e.dataset,e.increment,g,p,r,o,i,d),this.drawLineForeground(e.chart_div,l,e.legend,e.dataset,e.increment,g,p,r,o,i,d,t,a,u),u&&Nwagon_ie.line.guide_line){var v=h?150:0,f=Math.round(r-i-v)/s.length,m=document.createElement("div");l.appendChild(m);var w=Nwagon_ie.line.guide_line,_=document.getElementById(e.chart_div),C=l.offsetLeft+l.clientLeft,y=l.offsetTop+l.clientTop;_.attachEvent("onmousemove",function(e){var t=e.clientX-C,a=e.clientY-y;if(t-i>0){var n=Math.floor((t-i)/f);if(t>Nwagon_ie.line.guide_line_max_left&&(t=Nwagon_ie.line.guide_line_max_left-i),t>=i&&n<s.length){w.style.left=t+"px",m.innerHTML="",m.style.cssText="display: block; float:left; padding: 0 5px 0 5px; background-color:#f9f9f9; border: 1px solid #666; position:absolute; z-index:100",m.style.fontSize="12px",m.style.left=t+"px",m.style.top=a-14*h.length+document.body.scrollTop+"px";for(var r=0;r<h.length;r++){var o=s[n]+"("+h[r]+"): "+c[n][r],l=document.createElement("div");l&&(l.innerHTML=o,m.appendChild(l))}}}}),_.attachEvent("onmouseout",function(e){m.style.cssText="display:none"})}},drawJiraForeground:function(e,t,a,n,r){var o=function(e,t){var a,n={};return a=t[1]==e[1]?0:(t[1]-e[1])/(t[0]-e[0]),n.alpha=e[1]-a*e[0],n.slope=a,n},l=function(e,n){if(e&&n){for(var o,l,i,d,s,h="",c=0;c<e.length;){if(e[c][1]<n[c][1]){l=e,i=n,o=t[0];break}if(e[c][1]>n[c][1]){l=n,i=e,o=t[1];break}c++}for(var g=0;g<l.length;){d=Math.round(l[g][0]);var p=r-l[g][1];s=Math.round(r-p),h+=0===g?"M "+d+" "+s:" L "+d+" "+s,g++}for(var u=i.length-1;u>=0;){d=Math.round(i[u][0]);p=r-i[u][1];h+=" L "+d+" "+(s=Math.round(r-p)),u--}h+=" X E";var v=document.createElement("v:shape"),f={path:h,strokecolor:"#CCC",fillcolor:o};Nwagon_ie.setAttributes(v,f);var m={position:"absolute",width:a.style.width,height:a.style.height,filter:"alpha(opacity=80)"};Nwagon_ie.setStyles(v,m),a.appendChild(v)}},i=[];if(2==e.length){t[0],t[1];var d=e[0],s=e[1],h=[],c=[];if(d.length===s.length)for(var g=d.length,p=0;p<g;p++)if(h.push(d[p]),c.push(s[p]),d[p][1]<s[p][1]?i.push(s[p]):i.push(d[p]),p!==g-1&&!(d[p][1]>s[p][1]&&d[p+1][1]>s[p+1][1]||d[p][1]<s[p][1]&&d[p+1][1]<s[p+1][1]||d[p][1]==s[p][1]||d[p+1][1]==s[p+1][1])){var u=[],v=o(d[p],d[p+1]),f=o(s[p],s[p+1]),m=v.slope,w=f.slope,_=v.alpha,C=(N=(f.alpha-_)/(m-w))*m+_;u.push(N),u.push(C),i.push(u),h.push(u),h.push(u),c.push(u),c.push(u)}}if(i.length){var y="";for(p=0;p<i.length;p++){var N=Math.round(i[p][0]),x=r-i[p][1];C=Math.round(r-x);y+=0===p?"M "+N+" "+C:" L "+N+" "+C}y+=" L "+i[i.length-1][0]+" "+r+" L "+n+" "+r+" X E";var M=document.createElement("v:shape"),E={path:y,strokecolor:"#CCC",fillcolor:"#FFF"};Nwagon_ie.setAttributes(M,E);var S={position:"absolute",width:a.style.width,height:a.style.height,filter:"alpha(opacity=80)"};Nwagon_ie.setStyles(M,S),a.appendChild(M)}if(h.length===c.length)for(p=0;p<h.length;){if(h[p][1]==c[p][1]&&0!=p||p==h.length-1){var T=h.splice(p+1,h.length-1),b=c.splice(p+1,c.length-1);l(h,c),h=T,c=b,p=0}p++}},drawLineForeground:function(e,t,a,n,r,o,l,i,d,s,h,c,g,p){for(var u=a.names,v=n.colorset,f=n.fields,m=n.values,w=m.length,_=f?150:0,C=Math.round((i-s-_)/w),y=s,N=d-h,x=(o-l)/r,M=Math.round((d-h)/(x+1))/r,E=[],S=[],T="",b=m[0],A=Nwagon_ie.createTooltip(t),L={},k=[],O=0;O<b.length;O++){var F=document.getElementById(e).getElementsByTagName("ul")[0];if(F){var V=document.createElement("li");V.innerHTML=f[O];var P=document.createElement("ul");V.appendChild(P),F.appendChild(V)}for(var I=0,B="",D="",H=[],R=0,X=0,z=0;z<m.length;z++){var U=[];if(R=y+C*z,X=N-Math.round((m[z][O]-.5-l)*M),isNaN(X))I++;else{z==I?(B+="M "+R+" "+X,X):B+="L "+R+" "+X,U.push(R),U.push(X),H.push(U);var Z=Nwagon_ie.drawVertex(R,X,v[O]);if(T=f?u[z]+"("+f[O]+"): "+m[z][O].toString():u[z]+": "+m[z][O].toString(),p||(Z.onmouseover=Nwagon_ie.showToolTip(A,R,X,T),Z.onmouseout=Nwagon_ie.hideToolTip(A)),t.appendChild(Z),P){var G=document.createElement("li");G.innerHTML="Label "+u[z]+",  Value "+m[z][O].toString(),P.appendChild(G)}}}E.push(B),c&&(D=B+"L "+R+" "+N+" L "+y+" "+N+" L "+y+" "+X+" X E",S.push(D)),k.push(H)}for(O=0;O<b.length;O++){var j=document.createElement("v:shape"),W={path:E[O],strokecolor:v[O],strokeweight:"2px"};Nwagon_ie.setAttributes(j,W),L={position:"absolute",width:t.style.width,height:t.style.height},Nwagon_ie.setStyles(j,L);var q=document.createElement("v:fill");if(q.setAttribute("on","false"),j.appendChild(q),t.appendChild(j),c){var J=document.createElement("v:shape");W={path:S[O],strokecolor:v[O],fillcolor:v[O]},Nwagon_ie.setAttributes(J,W),L={position:"absolute",width:t.style.width,height:t.style.height,filter:"alpha(opacity=80)"},Nwagon_ie.setStyles(J,L),t.appendChild(J)}if(f){var Y=i-_+30,$=document.createElement("v:rect");L={position:"absolute",width:"20px",height:"15px",left:Y+"px",top:30+30*O+"px"},Nwagon_ie.setStyles($,L),W={fillcolor:v[O],strokecolor:"#FFFFFF",strokeweight:"1px"},Nwagon_ie.setAttributes($,W),t.appendChild($);var K=document.createElement("div");K.appendChild(document.createTextNode(f[O])),L={position:"absolute",left:Y+30+"px",top:30+30*O+"px",fontSize:"12px"},Nwagon_ie.setStyles(K,L),t.appendChild(K)}}if(g&&Nwagon_ie.line.drawJiraForeground(k,v,t,s,d-h),p){Nwagon_ie.line.guide_line=document.createElement("div");var Q=s+C*w;Nwagon_ie.line.guide_line_max_left=Q,Nwagon_ie.setStyles(Nwagon_ie.line.guide_line,{position:"absolute",width:"2px",height:d-h+5+"px",left:Q+"px",background:"#4010ad"}),t.appendChild(Nwagon_ie.line.guide_line)}},drawBackground:function(e,t,a,n,r,o,l,i,d,s){var h=a.values.length,c=Math.ceil((r-o)/n),g=0;if(a.fields&&(g=150),h)var p=Math.round((l-d-g)/h);for(var u=Math.round((i-s)/(c+1)),v=a.values,f={},m={},w=0;w<v.length;w++){var _=document.createElement("v:shape"),C=d+p*w;f={path:"M "+C+" "+(i-s+5)+"L "+C+" "+(0==w?i-s-u*(c+1):i-s-5),strokecolor:"#CCC",strokeweight:"1px"},Nwagon_ie.setAttributes(_,f),m={position:"absolute",width:e.style.width,height:e.style.height},Nwagon_ie.setStyles(_,m),e.appendChild(_);var y=document.createElement("div");y.appendChild(document.createTextNode(t[w])),m={position:"absolute",left:C+"px",top:i-s+15+"px",fontSize:"13px"},Nwagon_ie.setStyles(y,m),e.appendChild(y)}var N=l-g+3;for(w=0;w<=c;w++){var x=document.createElement("v:shape"),M=i-s-u*w;f={path:"M "+(d-3)+" "+M+"L "+N+" "+M,strokecolor:"#CCC",strokeweight:"1px"},Nwagon_ie.setAttributes(x,f),m={position:"absolute",width:e.style.width,height:e.style.height},Nwagon_ie.setStyles(x,m);var E=document.createElement("v:stroke");E.setAttribute("dashstyle","dash"),x.appendChild(E),e.appendChild(x);var S=document.createElement("div"),T=(n*w+o).toString();S.appendChild(document.createTextNode(T)),m={position:"absolute",right:l-d+15+"px",top:M-3+"px",fontSize:"13px"},Nwagon_ie.setStyles(S,m),e.appendChild(S)}}},polar:{drawPolarChart:function(e){var t=e.width,a=e.height,n=(e.dataset.values,Nwagon_ie.createChartArea(e.chart_div,t,a)),r={angles:[],percent:[],values:[]};if("polar_pie"==e.chartType){var o=e.dataset.degree_values;o&&(r=Nwagon.getAngles(o,r))}n&&e.legend.names&&e.dataset&&(this.drawBackground(n,r.angles,e.chartType,e.legend.names,e.dataset,e.increment,e.max,e.core_circle_radius,a),this.drawForeground(n,e.chart_div,r,e.chartType,e.legend,e.dataset,e.core_circle_radius,e.core_circle_value,e.max,a),e.dataset.fields&&Nwagon_ie.drawFields_for_circular_type_chart(e.dataset.fields,e.dataset.colorset,n,a))},drawForeground:function(e,t,a,n,r,o,l,i,d,s){var h=document.getElementById(t).getElementsByTagName("ul")[0],c=function(e){if(h){var t=document.createElement("li");t.innerHTML=e,h.appendChild(t)}},g=Math.round(s/2),p=Math.round(s/2),u=r.names,v=o.values,f=o.colorset,m=o.opacity,w=v.length,_=90,C={},y=80,N=Math.PI/2;if(w){for(var x=Math.round(360/w),M=2*Math.PI/w,E=0;E<w;E++){a.angles.length&&(x=a.angles[E],M=a.angles[E]*Math.PI/180);for(var S=v[E],T=S.length,b=x/T,A=M/T,L=0;L<T;L++){m.length&&(y=100*Nwagon.getOpacity(m,S[L],d)),C={cssText:"position:absolute",width:e.style.width,height:e.style.height,filter:"alpha(opacity="+y+")"};var k=Nwagon_ie.drawWedges(g,p,S[L]+l,f[E],_,b,C);e.appendChild(k),_-=b;var O=N+A/2,F=d+l+20,V=g-5-Math.round(F*Math.cos(O)),P=s-5-p-Math.round(F*Math.sin(O));(I=document.createElement("div")).appendChild(document.createTextNode(u[E][L])),C={position:"absolute",left:V+"px",top:P+"px",fontSize:"13px"},Nwagon_ie.setStyles(I,C),e.appendChild(I),N+=A,c(u[E][L]+"("+S[L]+")")}}if(l>0){C={cssText:"position:absolute",width:e.style.width,height:e.style.height};var I,B=Nwagon_ie.drawWedges(g,p,l,"#FFFFFF",0,360,C);e.appendChild(B),(I=document.createElement("div")).appendChild(document.createTextNode(i)),C={cssText:"position:absolute; z-index:100",left:g-l/2+"px",top:p-5+"px",fontSize:"12px"},Nwagon_ie.setStyles(I,C),e.appendChild(I)}}},drawBackground:function(e,t,a,n,r,o,l,i,d){for(var s=Math.round(d/2),h=Math.round(d/2),c=r.values,g=c.length,p=function(t){var a=Math.round(5898150),n=-Math.round(23592960),r=document.createElement("v:shape"),o={path:"AE "+s+" "+h+" "+t+" "+t+" "+a+" "+n+" X E",fillcolor:"#FFFFFF",strokecolor:"#CCC",strokeweight:"1px"};Nwagon_ie.setAttributes(r,o);var l={cssText:"position:absolute",width:e.style.width,height:e.style.height};Nwagon_ie.setStyles(r,l),e.appendChild(r)},u=l+i;u>i;){p(u);var v=document.createElement("div");v.appendChild(document.createTextNode((u-i).toString())),style_attr={cssText:"position:absolute; z-index:100",left:s+"px",top:d-h-u-10+"px",fontSize:"12px"},Nwagon_ie.setStyles(v,style_attr),e.appendChild(v),u-=o}var f=0,m=Math.PI/2;if(g)for(var w=2*Math.PI/g,_=0;_<g;_++){t.length?f+=t[_]*Math.PI/180:f=w*_;var C=l+i,y=document.createElement("v:shape"),N={path:"M "+s+" "+h+"L "+(s-Math.round(C*Math.cos(f+m)))+" "+(d-h-Math.round(C*Math.sin(f+m))),strokecolor:"#CCC",strokeweight:"1px"};Nwagon_ie.setAttributes(y,N),style_attr={position:"absolute",width:e.style.width,height:e.style.height},Nwagon_ie.setStyles(y,style_attr),e.appendChild(y);var x=c[_];if(x)for(var M=x.length,E=1;E<M;E++){var S=f+w/M*E+m,T=document.createElement("v:shape");N={path:"M "+s+" "+h+"L "+(s-Math.round(C*Math.cos(S)))+" "+(d-h-Math.round(C*Math.sin(S))),strokecolor:"#CCC",strokeweight:"1px"};Nwagon_ie.setAttributes(T,N),style_attr={position:"absolute",width:e.style.width,height:e.style.height},Nwagon_ie.setStyles(T,style_attr),e.appendChild(T)}}}},donut:{drawDonutChart:function(e){var t=e.width,a=e.height,n=Nwagon_ie.createChartArea(e.chart_div,t,a),r={angles:[],percent:[],values:[]},o=e.dataset.values;o&&(r=Nwagon.getAngles(o,r)),this.drawDonut(e.chart_div,r,e.chartType,n,e.dataset,e.core_circle_radius,e.donut_width,a),Nwagon_ie.drawFields_for_circular_type_chart(e.dataset.fields,e.dataset.colorset,n,a)},drawDonut:function(e,t,a,n,r,o,l,i){for(var d=l+o,s=document.getElementById(e).getElementsByTagName("ul")[0],h=function(e){if(s){var t=document.createElement("li");t.innerHTML=e,s.appendChild(t)}},c=Nwagon_ie.createTooltip(n),g=(r.values,r.colorset),p=r.fields,u=t.angles,v={},f=90,m="",w=Math.round(i/2),_=Math.round(i/2),C=0;C<u.length;C++){v={cssText:"position:absolute",width:n.style.width,height:n.style.height};var y=Nwagon_ie.drawWedges(w,_,d,g[C],f,u[C],v);n.appendChild(y);var N=Math.PI*f/180,x=w+d*Math.cos(N),M=_+d*Math.sin(N),E=t.values[C].toFixed(0);if(m=p[C]?p[C]+"("+(100*t.percent[C]).toFixed(1)+"%) "+E:"undefiend",y.onmouseover=Nwagon_ie.showToolTip(c,x,M,m),y.onmouseout=Nwagon_ie.hideToolTip(c),"donut"==a){v={cssText:"position:absolute; z-index:50",width:n.style.width,height:n.style.height};var S=Nwagon_ie.drawWedges(w,_,o,"#FFFFFF",f,u[C],v);n.appendChild(S)}f-=u[C],h(m)}}},radar:{drawRadarChart:function(e){var t=e.width,a=e.height,n=Nwagon_ie.createChartArea(e.chart_div,t,a);this.drawBackground(n,e.legend.names,e.dataset.bgColor,CONST_DECREMENT,CONST_MAX_RADIUS,a,t),this.drawPolygonForeground(e.chart_div,n,e.legend,e.dataset,a,t)},drawBackground:function(e,t,a,n,r,o,l){for(var i=t.length,d=Math.round(l/2),s=Math.round(o/2),h=2*Math.PI/i,c=Math.PI,g=0,p=0,u=d+" "+s,v={position:"absolute",width:e.style.width,height:e.style.height},f={},m=function(e,t,a,n){var r=document.createElement("v:shape"),o={path:"M "+e+"L "+t,strokecolor:"#666",strokeweight:"1px"};if(Nwagon_ie.setAttributes(r,o),Nwagon_ie.setStyles(r,a),n){var l=document.createElement("v:stroke");l.setAttribute("dashstyle","dash"),r.appendChild(l)}return r},w=function(e,t,a){var n=document.createElement("div");return n.appendChild(document.createTextNode(e)),Nwagon_ie.setStyles(n,{cssText:"position:absolute; z-index:100",left:t+"px",top:a-5+"px",fontSize:"10px"}),n},_=1;_<=i;_++){var C=0,y=r;p=h*(_-1)+c,g=h*_+c;var N=Math.round((r+20)*Math.cos(g)),x=Math.round((r+20)*Math.sin(g)),M=m(u,d-Math.round(r*Math.cos(g))+" "+(o-s-Math.round(r*Math.sin(g))),v,!1);e.appendChild(M);var E=document.createElement("div");for(_==i?E.appendChild(document.createTextNode(t[0])):E.appendChild(document.createTextNode(t[_])),f={cssText:"position:absolute; z-index:100",fontSize:"12px"},Nwagon_ie.setStyles(E,f),e.appendChild(E),N>0&&(C=E.clientWidth),0==N&&(C=Math.round(E.clientWidth/2)),E.style.left=d-N-C+"px",E.style.top=o-s-(x+5)+"px";y>0;){if(1==_){var S=w(y.toString(),d+y,o-s);e.appendChild(S)}var T=m(d-Math.round(y*Math.cos(g))+" "+(o-s-Math.round(y*Math.sin(g))),d-Math.round(y*Math.cos(p))+" "+(o-s-Math.round(y*Math.sin(p))),v,!0);e.appendChild(T),y-=n}}},dimmedPie:function(e,t,a,n,r,o,l){var i,d,s=document.createElement("v:shape");i=0==e?t-1:e-1,d=e==t?0:e+1;var h={path:"M "+n+" "+r+" L "+(n-Math.round(CONST_MAX_RADIUS*Math.cos(o*i+l)))+" "+(a-r-Math.round(CONST_MAX_RADIUS*Math.sin(o*i+l)))+" L "+(n-Math.round(CONST_MAX_RADIUS*Math.cos(o*e+l)))+" "+(a-r-Math.round(CONST_MAX_RADIUS*Math.sin(o*e+l)))+" L "+(n-Math.round(CONST_MAX_RADIUS*Math.cos(o*d+l)))+" "+(a-r-Math.round(CONST_MAX_RADIUS*Math.sin(o*d+l)))+" X E",strokecolor:"#000000",strokeweight:"1px",fillcolor:"#000000"};return Nwagon_ie.setAttributes(s,h),s},drawPolygonForeground:function(e,t,a,n,r,o){var l={position:"absolute",width:t.style.width,height:t.style.height,filter:""},i=Math.round(o/2),d=Math.round(r/2),s=n.values,h=n.title,c=n.fgColor?n.fgColor:"#30A1CE",g=1==s.length,p=a.names,u=0,v=document.getElementById(e).getElementsByTagName("ul")[0];if(v&&(v.innerHTML=h),g)var f=Nwagon_ie.createTooltip(t);for(var m=0;m<s.length;m++){if(v){var w=document.createElement("li");w.innerHTML="Data set number "+(m+1).toString();var _=document.createElement("ul");w.appendChild(_),v.appendChild(w)}for(var C=s[m],y=C.length,N=2*Math.PI/y,x=Math.PI,M=0,E="",S=0;S<C.length;S++){if("number"!=typeof C[S]){u=0;var T=Nwagon_ie.radar.dimmedPie(S,C.length,r,i,d,N,x);l.filter="alpha(opacity=10)",Nwagon_ie.setStyles(T,l),t.appendChild(T)}else u=C[S];if(_){var b=document.createElement("li");b.innerHTML=p[S]+": "+C[S],_.appendChild(b)}M=N*S+x,E+=0==S?"M "+(i-Math.round(u*Math.cos(M)))+" "+(r-d-Math.round(u*Math.sin(M))):" L "+(i-Math.round(u*Math.cos(M)))+" "+(r-d-Math.round(u*Math.sin(M)));var A=Nwagon_ie.drawVertex(i-Math.round(u*Math.cos(M)),r-d-Math.round(u*Math.sin(M)),c);text_to_add=p[S]+": "+C[S],g&&(A.onmouseover=Nwagon_ie.showToolTip(f,i-Math.round(u*Math.cos(M)),r-d-Math.round(u*Math.sin(M)),text_to_add),A.onmouseout=Nwagon_ie.hideToolTip(f)),t.appendChild(A)}E+=" X E";var L=document.createElement("v:shape"),k={path:E,strokecolor:c,strokeweight:"1px",fillcolor:c};Nwagon_ie.setAttributes(L,k),l.filter="alpha(opacity=80)",Nwagon_ie.setStyles(L,l),t.appendChild(L)}}}};